# ПРАКТИЧЕСКАЯ РАБОТА №12 – ОТПРАВКА ОПОВЕЩЕНИЙ ОТ ОБЛАЧНОЙ ПЛАТФОРМЫ
### Использование сторонних сервисов для отправки оповещений
Механизм тревог, рассмотренный в 11 практической работе, позволяет формировать оповещения внутри облачно платформы, однако, таких оповещений может быть недостаточно. Для более быстрого реагирования на возникающие инциденты можно использовать дополнительные средства.

К примеру, одним из наиболее часто используемых вариантов является оповещение при помощи электронной почты.

Сервис может использовать свой собственный почтовый сервер или же перенаправлять сообщения через сторонние сервера пересылки электронных писем, доставляя оповещения о возникающих инцидентах. Такой подход позволяет сообщать администраторам системы о возникновении сбоев даже в случае, если они в текущей момент не отслеживают состояние облачного сервиса через интерфейс облачной платформы. 
Помимо электронных писем возможно применение sms-сообщений для отправки оповещений. Данный подход используется для отправки наиболее срочных оповещений, поскольку позволяет быстрее реагировать на возникающие инциденты.

Помимо этого, могут применяться различные дополнительные сервисы оповещений, к примеру Discord и Телеграм. 

### Протокол SMTP
SMTP — это простой протокол передачи почты. С английского языка переводится, как Simple Mail Transfer Protocol. SMTP сервер отвечает за отправку почтовых рассылок. Его задача, как правило, состоит из двух основных функций: 
- проверка правильности настроек и выдача разрешения компьютеру, который пытается отправить электронное сообщение; 
- отправка исходящего сообщения на указанный адрес и подтверждение успешной отправки сообщения. Если доставка невозможна, сервер возвращает отправителю ответ с ошибкой отправки. 

Отправляя Email сообщения, SMTP-сервер отправителя устанавливает связь с тем сервером, который будет получать это сообщение. Такое "общение" происходит путем отправки и получения команд, формируя SMTP-сессию с неограниченным количеством SMTP-операций. Обязательными командами для каждой операции являются три: 
- определение обратного адреса (MAILFROM); 
- определение получателя e-mail сообщения (RCPT TO);
- отправка текста сообщения (DATA).

Определение адреса отправителя, получателя и наличие содержимого письма – это обязательные условия, без которых письмо не будет отправлено.

### Настройка SMTP-сервера
Прежде чем перейти к отправке оповещений с помощью электронных писем, необходимо настроить SMTP-сервер. 

Для этого в меню перейдите в раздел Администрирование – Настройки проекта и выберите вкладку Интеграции (рисунок 1). 

![](../images/Pasted%20image%2020241215222417.png)

В данном разделе выберите тип интеграции уведомлений, то есть куда необходимо отправлять сообщения, в случае с отправкой электронных сообщений, типом интеграции уведомлений будет являться SMTP.

Большинство современных почтовых сервисов позволяют использовать свой SMTP-сервер в внешних системах. 

Инструкции по созданию и использованию SMTP: 
1.	Google (gmail): https://support.google.com/a/answer/176600?hl=ru
2.	Яндекс: https://help.reg.ru/support/pochta-i-servisy/google-workspace/nastroyka-pochtovykh-kliyentov-dlya-yandeks-pochtyy#0

Заполните поля в настройке канала сообщений в Rightech согласно инструкции выбранного почтового сервиса. 

Примечание: в качестве пароля необходимо сгенерировать пароль для приложения. Такая функция есть у обоих сервисов: https://yandex.ru/support/id/authorization/apppasswords.html и https://support.google.com/accounts/answer/185833?hl=ru .

Нажмите кнопку Сохранить. После этого станет активно окно Тестирование. Введите получателя, тему и тело письма и нажмите Отправить тестовое письмо.

Если SMTP-сервер настроен верно, то вы увидите сообщение Тестовое письмо успешно отправлено.

Если в настройках SMTP-сервера есть ошибка, то вы увидите ее описание.

В этом случае внесите исправления в форме настройки SMTP и нажмите Сохранить, после чего повторите тестирование еще раз.

![](../images/Pasted%20image%2020241215222448.png)

![](../images/Pasted%20image%2020241215222453.png)

### Отправка оповещений с помощью почтового сервиса
Если в ходе выполнения логики автомата необходимо отправлять электронные письма по определенным адресам, воспользуйтесь отправкой e-mail. Для того чтобы настроить параметры отправки, добавьте в состояние команду Отправить e-mail (рисунок 4).  

